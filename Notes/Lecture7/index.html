<html>
  <body>
    <h2>Today Agenda</h2>
    <ul>
      <li>difference b/w sync and async</li>
      <li>Promise</li>
    </ul>
    <h2>Next Class</h2>
    <ul>
      <li>async - await</li>
      <li>Http calls (GET, PUT, POST, DELETE)</li>
    </ul>
  </body>
  <script>
    // Self invoke function
    (() => {
      // advance concept if someone intereste : https://medium.com/@theflyingmantis/javascript-single-threaded-non-blocking-asynchronous-concurrent-language-ffae97c57bef
      // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise
      // sync ==> blocks/freez/non-responsive the browser UI
      /*const name = "arslan";
      setTimeout(() => console.log("timeout done!"), 0);
      console.log(name);
      console.log("a");
      console.log("b");
      // Promise (If we don't want to freez our UI)
      Promise.resolve(console.log("promise resolved"));
      // example setTimeout
      setTimeout(() => console.log("async done!"), 5000);*/

      const longApiCall = () => {
        return new Promise((resolve, reject) => {
          console.log("before resolve, reject");
          resolve({ id: 1 });
          reject("user already exists");
          console.log("after resolve, reject");
        });
      };
      const response = longApiCall();
      response
        .then((data) => {
          // TODO: we could notify the user by showing message
          console.log("api call successfully executed", data);
        })
        .catch((error) => {
          console.log("api call failed", error);
        });
      for (let i = 0; i < 10; i++) {
        console.log("after long api call", i);
      }
    })();
  </script>
</html>
